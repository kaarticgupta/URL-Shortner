# 🚀 URL Shortener API

Welcome to the **URL Shortener API**, a lightweight, efficient, and scalable RESTful service that lets users create shortened URLs, retrieve original URLs, update/delete short links, and track usage statistics — all powered by **Node.js**, **Express.js**, **Prisma ORM**, and **PostgreSQL**.

---

## 🎯 Project Overview

This API aims to simplify long URLs into compact short codes for easy sharing and management. It supports:

- Creating new short URLs from long URLs
- Retrieving original URLs by short code
- Updating existing short URLs
- Deleting short URLs
- Tracking access counts (statistics) for each short URL

---

## 🗂 Folder Structure

```
.
├── controllers
│   └── urlController.js      # Core logic: CRUD + stats for URLs
├── prisma
│   ├── migrations            # Database migration files generated by Prisma
│   └── schema.prisma         # Prisma schema defining DB model and connection
├── routes
│   └── urlRoutes.js          # API routing for URL-related endpoints
├── node_modules              # Dependencies installed via npm
├── .env                     # Environment variables (DB connection, port, etc.)
├── .gitignore               # Files/folders ignored by Git
├── app.js                   # Express app setup (middleware, routing)
├── package.json             # Project dependencies and scripts
├── package-lock.json        # Lockfile for npm dependencies
├── README.md                # This documentation file
└── server.js                # Entry point — server & DB initialization
```

---

## ⚙️ Technologies Used

| Technology | Purpose                                  |
| ---------- | ---------------------------------------- |
| Node.js    | JavaScript runtime                       |
| Express.js | Web framework for handling HTTP requests |
| Prisma ORM | Database ORM for type-safe DB access     |
| PostgreSQL | Relational database                      |
| dotenv     | Environment variable management          |
| morgan     | HTTP request logging middleware          |

---

## 🛠 Setup & Installation

1. **Clone the repository**

```bash
git clone https://github.com/your-username/url-shortener-api.git
cd url-shortener-api
```

2. **Install dependencies**

```bash
npm install
```

3. **Configure environment variables**

Create a `.env` file in the root directory with the following content:

```
DATABASE_URL="postgresql://username:password@localhost:5432/urlshort"
PORT=5000
```

4. **Set up the database**

Make sure PostgreSQL is running locally and that the database `urlshort` exists. Then run Prisma migrations:

```bash
npx prisma migrate deploy
```

5. **Start the server**

```bash
npm start
```

Server will start on `http://localhost:5000`

---

## 🚀 API Endpoints

### 1. Create Short URL

**POST** `/shorten`  
Request body (JSON):

```json
{
  "url": "https://www.example.com/long-url"
}
```

Response:

```json
{
  "id": 1,
  "url": "https://www.example.com/long-url",
  "shortCode": "abc123",
  "createdAt": "2025-08-12T12:00:00Z",
  "updatedAt": "2025-08-12T12:00:00Z"
}
```

---

### 2. Retrieve Original URL

**GET** `/shorten/:shortcode`  
Example: `/shorten/abc123`

Response:

```json
{
  "id": 1,
  "url": "https://www.example.com/long-url",
  "shortCode": "abc123",
  "createdAt": "2025-08-12T12:00:00Z",
  "updatedAt": "2025-08-12T12:00:00Z",
  "accessCount": 5
}
```

---

### 3. Update Short URL

**PUT** `/shorten/:shortcode`  
Request body (JSON):

```json
{
  "url": "https://www.example.com/updated-url"
}
```

Response:

```json
{
  "id": 1,
  "url": "https://www.example.com/updated-url",
  "shortCode": "abc123",
  "createdAt": "2025-08-12T12:00:00Z",
  "updatedAt": "2025-08-12T12:30:00Z"
}
```

---

### 4. Delete Short URL

**DELETE** `/shorten/:shortcode`

Response: Status `204 No Content` on success.

---

### 5. Get URL Statistics

**GET** `/shorten/:shortcode/stats`

Response:

```json
{
  "id": 1,
  "url": "https://www.example.com/long-url",
  "shortCode": "abc123",
  "createdAt": "2025-08-12T12:00:00Z",
  "updatedAt": "2025-08-12T12:00:00Z",
  "accessCount": 10
}
```

---

## 🔍 How It Works — Behind the Scenes

- **Routing:**  
  Routes are defined in `routes/urlRoutes.js` and forward requests to controller functions in `controllers/urlController.js`.

- **Controllers:**  
  Controllers implement the core logic — interacting with Prisma ORM to read/write data to the PostgreSQL database.

- **Database:**  
  The PostgreSQL database hosts a `ShortURL` table with columns for the original URL, a unique short code, timestamps, and an access count.

- **Short Code Generation:**  
  When creating a new shortened URL, the system generates a unique short code randomly.

- **Access Count:**  
  Each time a shortened URL is retrieved, its `accessCount` increments automatically to track usage.

---

## 📦 Dependencies & Scripts

- Install dependencies:

```bash
npm install
```

- Start the server:

```bash
npm start
```

- Manage database migrations via Prisma CLI:

```bash
npx prisma migrate deploy
```

---

## 💡 Future Enhancements

- Add user authentication & authorization.
- Build a frontend for URL creation & automatic redirect.
- Implement rate limiting and abuse prevention.
- Allow custom short codes from users.
- Provide analytics dashboard for URL performance.

---

## 📝 License

This project is licensed under the MIT License.

---

## 🙏 Acknowledgments

Thanks to the open-source community for making tools like Node.js, Express, Prisma, and PostgreSQL available to developers worldwide!

---
